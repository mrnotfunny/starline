local Player = game:GetService("Players").LocalPlayer
FindPlayer = function(h,h2)
	if string.lower(h) == "me" then
		return Player
	else
		h = h:gsub("%s+", "")
		for m, n in pairs(game:GetService("Players"):GetPlayers()) do
			if n.Name:lower():match("^" .. h:lower()) or n.DisplayName:lower():match("^" .. h:lower()) then
				return n
			end
		end
	end
	return nil
end
task.spawn(function()
	local popup = Instance.new("ScreenGui")
	popup.Name = "WelcomePopup"
	popup.ResetOnSpawn = false


	local message = Instance.new("TextLabel")
	message.Name = "Message"
	message.Size = UDim2.new(0, 300, 0, 50)
	message.Position = UDim2.new(0.5, -150, 0.5, -25)
	message.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	message.BackgroundTransparency = 1
	message.TextColor3 = Color3.fromRGB(255, 255, 255)
	message.TextTransparency = 1
	message.TextScaled = true
	message.Font = Enum.Font.SourceSansBold
	message.Text = "Welcome to starline admin!"
	message.Parent = popup

	popup.Parent = game.Players.LocalPlayer.PlayerGui


	local tweenInInfo = TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.In)
	local tweenIn = game:GetService("TweenService"):Create(message, tweenInInfo, {BackgroundTransparency = 1, TextTransparency = 0})
	tweenIn:Play()


	wait(2)


	local tweenOutInfo = TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.Out)
	local tweenOut = game:GetService("TweenService"):Create(message, tweenOutInfo, {Position = UDim2.new(0.5, -150, 0, -50), BackgroundTransparency = 1, TextTransparency = 1})
	tweenOut:Play()


	tweenOut.Completed:Connect(function()
		popup:Destroy()
	end)

	wait(2)

	local popup = Instance.new("ScreenGui")
	popup.Name = "WelcomePopup"
	popup.ResetOnSpawn = false


	local message = Instance.new("TextLabel")
	message.Name = "Message"
	message.Size = UDim2.new(0, 300, 0, 50)
	message.Position = UDim2.new(0.5, -150, 0.5, -25)
	message.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	message.BackgroundTransparency = 1
	message.TextColor3 = Color3.fromRGB(255, 255, 255)
	message.TextTransparency = 1
	message.TextScaled = true
	message.Font = Enum.Font.SourceSansBold
	message.Text = "by callmexdrop#8520!"
	message.Parent = popup

	popup.Parent = game.Players.LocalPlayer.PlayerGui


	local tweenInInfo = TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.In)
	local tweenIn = game:GetService("TweenService"):Create(message, tweenInInfo, {BackgroundTransparency = 1, TextTransparency = 0})
	tweenIn:Play()


	wait(2)


	local tweenOutInfo = TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.Out)
	local tweenOut = game:GetService("TweenService"):Create(message, tweenOutInfo, {Position = UDim2.new(0.5, -150, 0, -50), BackgroundTransparency = 1, TextTransparency = 1})
	tweenOut:Play()


	tweenOut.Completed:Connect(function()
		popup:Destroy()
	end)

	local popup = Instance.new("ScreenGui")
	popup.Name = "WelcomePopup"
	popup.ResetOnSpawn = false


	local message = Instance.new("TextLabel")
	message.Name = "Message"
	message.Size = UDim2.new(0, 300, 0, 50)
	message.Position = UDim2.new(0.5, -150, 0.5, -25)
	message.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	message.BackgroundTransparency = 1
	message.TextColor3 = Color3.fromRGB(255, 255, 255)
	message.TextTransparency = 1
	message.TextScaled = true
	message.Font = Enum.Font.SourceSansBold
	message.Text = "prefix = ?"
	message.Parent = popup

	popup.Parent = game.Players.LocalPlayer.PlayerGui


	local tweenInInfo = TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.In)
	local tweenIn = game:GetService("TweenService"):Create(message, tweenInInfo, {BackgroundTransparency = 1, TextTransparency = 0})
	tweenIn:Play()


	wait(2)


	local tweenOutInfo = TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.Out)
	local tweenOut = game:GetService("TweenService"):Create(message, tweenOutInfo, {Position = UDim2.new(0.5, -150, 0, -50), BackgroundTransparency = 1, TextTransparency = 1})
	tweenOut:Play()


	tweenOut.Completed:Connect(function()
		popup:Destroy()
	end)

end)
local Players = game:GetService("Players")
local prefix = "?"




local Commands = {}
local Prefix = "?"
local Unload = false
function CreateCMD(Table,Extra)
	local Name = Table.Name
	local Callback = Table.CallBack
	Commands[#Commands+1] = {
		Callback = Callback,
		Name = Prefix..Name,
	}
	return
end


do
	CreateCMD({
		Name = "crim",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]

			local LocalPlayer_Torso = Players.LocalPlayer.Character.Torso
			local CrimPads = game:GetService("Workspace")["Criminals Spawn"].SpawnLocation
			firetouchinterest(LocalPlayer_Torso, CrimPads, 0)
			firetouchinterest(LocalPlayer_Torso, CrimPads, 1)
		end,
	})
	CreateCMD({
		Name = "cop",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]

			local origPos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame


			local args = {
				[1] = "Bright blue"
			}
			workspace.Remote.TeamEvent:FireServer(unpack(args))

			wait(0.4)


			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = origPos 
		end,
	})
	CreateCMD({
		Name = "inmate",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]

			local origPos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame


			local args = {
				[1] = "Bright orange"
			}

			workspace.Remote.TeamEvent:FireServer(unpack(args))

			wait(0.4)


			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = origPos
		end,
	})
	CreateCMD({
		Name = "inmate",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]

			local origPos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame


			local args = {
				[1] = "Bright orange"
			}

			workspace.Remote.TeamEvent:FireServer(unpack(args))

			wait(0.4)


			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = origPos
		end,
	})
	CreateCMD({
		Name = "rj",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]

			game:GetService("TeleportService"):Teleport(game.PlaceId, game:GetService("Players").LocalPlayer)
		end,
	})
	CreateCMD({
		Name = "guns",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]

			local origPos =game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-934.600952, 94.1286697, 2055.55273, 0.00534526818, -3.33113691e-13, 0.999985695, 7.77929685e-08, 1, -4.15497109e-10, -0.999985695, 7.7794077e-08, 0.00534526818)
			local args = {
				[1] = workspace.Prison_ITEMS.giver["AK-47"].ITEMPICKUP
			}

			workspace.Remote.ItemHandler:InvokeServer(unpack(args))

			wait(0.3)

			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(800.917908, 99.9899826, 2338.13965, 0.999618351, -2.98082519e-08, -0.0276257228, 3.07971995e-08, 1, 3.53725511e-08, 0.0276257228, -3.62098476e-08, 0.999618351)

			local args = {
				[1] = workspace.Prison_ITEMS.giver["Remington 870"].ITEMPICKUP
			}

			workspace.Remote.ItemHandler:InvokeServer(unpack(args))

			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = origPos
		end,
	})
	CreateCMD({
		Name = "rj",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]

			game:GetService("TeleportService"):Teleport(game.PlaceId, game:GetService("Players").LocalPlayer)
		end,
	})
	CreateCMD({
		Name = "wall",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(756.881653, 125.039917, 2586.37695, 0.991387188, 4.25011448e-09, -0.130963355, -3.99167233e-09, 1, 2.23590413e-09, 0.130963355, -1.69388381e-09, 0.991387188)

		end,
	})
	CreateCMD({
		Name = "cafe",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(919.476501, 99.9899368, 2318.39819, 0.999401569, -1.50539154e-08, 0.0345910192, 1.58261582e-08, 1, -2.20511094e-08, -0.0345910192, 2.25853558e-08, 0.999401569)

		end,
	})
	CreateCMD({
		Name = "nex",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(920.648438, 99.9899826, 2385.17212, 0.999513447, -2.17598046e-08, -0.031191662, 1.83955429e-08, 1, -1.08144718e-07, 0.031191662, 1.07518311e-07, 0.999513447)

		end,
	})
	CreateCMD({
		Name = "base",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-936.231445, 94.1287613, 2063.32349, 0.305474788, 1.29543363e-08, -0.952200174, 5.46855077e-08, 1, 3.11482609e-08, 0.952200174, -6.15865616e-08, 0.305474788)

		end,
	})
	CreateCMD({
		Name = "yard",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(788.417603, 97.999939, 2480.875, 0.998227835, 3.38506148e-08, 0.0595080964, -3.18430118e-08, 1, -3.46849269e-08, -0.0595080964, 3.27285434e-08, 0.998227835)

		end,
	})
	CreateCMD({
		Name = "secret",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(721.451233, 99.9899826, 2348.63745, 0.061317347, -4.26230642e-08, 0.998118341, 3.45617437e-08, 1, 4.05801899e-08, -0.998118341, 3.20084368e-08, 0.061317347)

		end,
	})
	CreateCMD({
		Name = "roof",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(802.200012, 118.989983, 2360.42065, -0.984072387, 3.33054295e-08, 0.177768305, 4.78049742e-08, 1, 7.72810651e-08, -0.177768305, 8.45483683e-08, -0.984072387)

		end,
	})
	CreateCMD({
		Name = "armory",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(800.917908, 99.9899826, 2338.13965, 0.999618351, -2.98082519e-08, -0.0276257228, 3.07971995e-08, 1, 3.53725511e-08, 0.0276257228, -3.62098476e-08, 0.999618351)

		end,
	})
	CreateCMD({
		Name = "mt",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local Arg3 = Args[3]
			game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(656.349548, 206.436401, 2909.99146, 0.957971334, -4.17152748e-08, -0.286863983, 2.79125558e-08, 1, -5.22053938e-08, 0.286863983, 4.20041637e-08, 0.957971334)
			local GunStates = nil -- Store the GunStates module in a variable
		end,
	})
	CreateCMD({
		Name = "gmod",
		CallBack = function(Args)
			local LocalPlayer = Players.LocalPlayer
			local Backpack = LocalPlayer.Backpack
			while true do
				for _, Gun in ipairs(Backpack:GetChildren()) do
					local GunStates = Gun:FindFirstChild("GunStates")
					if GunStates then
						GunStates = require(GunStates)
						GunStates.AutoFire = true
						GunStates.FireRate = 0.01
						GunStates.Spread = 0
						GunStates.Bullets = 6 --// Don't do this too high
					end
				end
				wait(.5)--//Prevent crashing
			end
		end,
	})
	CreateCMD({
		Name = "killall",
		CallBack = function(Args)
		    local origPos =game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
			 local players = game:GetService("Players")
local localPlayer = players.LocalPlayer
local killedPlayers = {}

spawn(function()
    while true do
        local allDead = true
        for i, v in ipairs(players:GetPlayers()) do
            if v ~= localPlayer and v.Character and v.Character:FindFirstChildOfClass("Humanoid") and v.Character.Humanoid.Health > 0 then
                if not killedPlayers[v.UserId] then
                    local team = v.TeamColor
                    if team ~= nil and team.Name ~= "Medium stone grey" then
                        allDead = false
                        local vHumanoidRootPart = v.Character:WaitForChild("HumanoidRootPart")
                        local localHumanoidRootPart = localPlayer.Character:WaitForChild("HumanoidRootPart")
                        while v.Character:WaitForChild("Humanoid").Health > 0 do
                            wait()
                            localHumanoidRootPart.CFrame = vHumanoidRootPart.CFrame
                            for i = 1, 13 do
                            game:GetService("ReplicatedStorage").meleeEvent:FireServer(v)
                        end
                        killedPlayers[v.UserId] = true
                        end
                    end
                end
            end
        end
        if allDead then
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = origPos
            break
        end
        wait(0.1)
    end
end)
		end,
	})
	CreateCMD({
		Name = "arrestall",
		CallBack = function(Args)
			 wait(0.1)
	Player = game.Players.LocalPlayer
	Pcf = Player.Character.HumanoidRootPart.CFrame
	for i,v in pairs(game.Teams.Criminals:GetPlayers()) do
		if v.Name ~= Player.Name then
			local i = 13
			repeat
				wait()
				i = i-1
				game.Workspace.Remote.arrest:InvokeServer(v.Character.HumanoidRootPart)
				Player.Character.HumanoidRootPart.CFrame = v.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 1)
			until i == 0
		end
	end
		end,
	})
	CreateCMD({
		Name = "",
		CallBack = function(Args)
			 
		end,
	})
	CreateCMD({
		Name = "",
		CallBack = function(Args)
			 
		end,
	})
	CreateCMD({
		Name = "kinmate",
		CallBack = function(Args)
		    local origPos =game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
			 			 local players = game:GetService("Players")
local localPlayer = players.LocalPlayer
local killedPlayers = {}

spawn(function()
    while true do
        local allDead = true
        for i, v in ipairs(players:GetPlayers()) do
            if v ~= localPlayer and v.Character and v.Character:FindFirstChildOfClass("Humanoid") and v.Character.Humanoid.Health > 0 then
                if not killedPlayers[v.UserId] then
                    local team = v.TeamColor
                    if team ~= nil and team.Name == "Bright orange" then
                        allDead = false
                        local vHumanoidRootPart = v.Character:WaitForChild("HumanoidRootPart")
                        local localHumanoidRootPart = localPlayer.Character:WaitForChild("HumanoidRootPart")
                        while v.Character:WaitForChild("Humanoid").Health > 0 do
                            wait()
                            localHumanoidRootPart.CFrame = vHumanoidRootPart.CFrame
                            for i = 1, 13 do
                            game:GetService("ReplicatedStorage").meleeEvent:FireServer(v)
                        end
                        killedPlayers[v.UserId] = true
                        end
                    end
                end
            end
        end
        if allDead then
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = origPos
            break
        end
        wait(0.1)
    end
end)

		end,
	})
	CreateCMD({
		Name = "",
		CallBack = function(Args)
			 
		end,
	})
	CreateCMD({
		Name = "kcops",	
		CallBack = function(Args)
		    local origPos =game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
			 local players = game:GetService("Players")
local localPlayer = players.LocalPlayer
local killedPlayers = {}

spawn(function()
    while true do
        local allDead = true
        for i, v in ipairs(players:GetPlayers()) do
            if v ~= localPlayer and v.Character and v.Character:FindFirstChildOfClass("Humanoid") and v.Character.Humanoid.Health > 0 then
                if not killedPlayers[v.UserId] then
                    local team = v.TeamColor
                    if team ~= nil and team.Name == "Bright blue" then
                        allDead = false
                        local vHumanoidRootPart = v.Character:WaitForChild("HumanoidRootPart")
                        local localHumanoidRootPart = localPlayer.Character:WaitForChild("HumanoidRootPart")
                        while v.Character:WaitForChild("Humanoid").Health > 0 do
                            wait()
                            localHumanoidRootPart.CFrame = vHumanoidRootPart.CFrame
                            for i = 1, 13 do
                            game:GetService("ReplicatedStorage").meleeEvent:FireServer(v)
                        end
                        killedPlayers[v.UserId] = true
                        end
                    end
                end
            end
        end
        if allDead then
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = origPos
            break
        end
        wait(0.1)
    end
end)

		end,
	})
	CreateCMD({
		Name = "to",
		CallBack = function(Args)
			local Arg1 = Args[1]
			local Arg2 = Args[2]
			local FoundPlayer = FindPlayer(Arg2) --> nil (if not found) OR --> player model (if found)
			if FoundPlayer then
				Player.Character:SetPrimaryPartCFrame(FoundPlayer.Character:GetPrimaryPartCFrame())
			end
		end,
	})
	CreateCMD({
		Name = "mk",
		CallBack = function(Args)
		    local origPos =game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
		 local Arg1 = Args[1]
            local Arg2 = Args[2]
            local FoundPlayer = FindPlayer(Arg2) --> nil (if not found) OR --> player model (if found)
            if FoundPlayer then
                Player.Character:SetPrimaryPartCFrame(FoundPlayer.Character:GetPrimaryPartCFrame())
                wait(0.2)
                 for i = 1, 13 do
                        game:GetService("ReplicatedStorage").meleeEvent:FireServer(FoundPlayer)
                 end
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = origPos
            end
        end,
		 
	})
end

function CheckCommand(String)
	if Unload then
		return
	end
	if String:sub(1,1) ~= Prefix then
		return
	end
	task.spawn(function()
		for i,v in pairs(Commands) do
			if v then
				local Orgin = String
				local Splitted = String:split(" ")
				if Splitted[2] then
					Orgin = Splitted[1]
				end
				if v.Name:lower() == Orgin:lower() then
					v.Callback(Splitted)
					break
				end
			end
		end
	end)
end

game:GetService("Players").LocalPlayer.Chatted:Connect(function(c)
	CheckCommand(c) --> -kill all
end)
